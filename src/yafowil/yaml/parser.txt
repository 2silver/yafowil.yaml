Form definition with 2 fields::

    >>> raw = """
    ... name: demoform
    ... props:
    ...     action: demoaction
    ... widgets:
    ... - firstfield:
    ...     factory: field:label:error:text
    ...     value: context.firstfield_value
    ...     properties:
    ...         label: First Field
    ...         description: I am the description
    ...         required: I am required
    ... - secondfield:
    ...     factory: field:label:error:select
    ...     value: ['a', 'b']
    ...     properties:
    ...         label: Second Field
    ...         multivalued: True
    ...         vocabulary: yafowil.yaml.tests.test_vocab
    ... """

Check how yaml parses this::

    >>> import yaml
    >>> pprint(yaml.load(raw))
    {'name': 'demoform',
     'props': {'action': 'demoaction'},
     'widgets': [{'firstfield': {'factory': 'field:label:error:text',
                                 'properties': {'description': 'I am the description',
                                                'label': 'First Field',
                                                'required': 'I am required'},
                                 'value': 'context.firstfield_value'}},
                 {'secondfield': {'factory': 'field:label:error:select',
                                  'properties': {'label': 'Second Field',
                                                 'multivalued': True,
                                                 'vocabulary': 'yafowil.yaml.tests.test_vocab'},
                                  'value': ['a', 'b']}}]}

Create tmp env::

    >>> import os
    >>> import tempfile
    >>> tempdir = tempfile.mkdtemp()
    >>> template_path = os.path.join(tempdir, 'tmpl.yaml')
    >>> with open(template_path, 'w') as file:
    ...     file.write(raw)
    
    >>> trash_path = os.path.join(tempdir, 'trash.yaml')
    >>> with open(trash_path, 'w') as file:
    ...     file.write("{]")

Create dummy context::

    >>> class DummyContext(object):
    ...     def firstfield_value(widget, data):
    ...         return 'First value'
    
    >>> context = DummyContext()

Test YamlParser for yafowil forms::

    >>> from yafowil.yaml import YAMLParser

    >>> YAMLParser('inexistent_path', context=context)()
    Traceback (most recent call last):
      ...
    YAMLTransformationError: File not found: 'inexistent_path'
    
    >>> YAMLParser(trash_path, context=context)()
    Traceback (most recent call last):
      ...
    YAMLTransformationError: Cannot parse YAML from given path '...trash.yaml'
    
    >>> parser = YAMLParser(template_path, context=context)
    >>> parser
    <yafowil.yaml.parser.YAMLParser object at ...>
    
    >>> parser.path
    '...tmpl.yaml'
    
    >>> parser.context
    <DummyContext object at ...>

    >>> from yafowil.yaml import parse_from_YAML
    >>> form = parse_from_YAML(template_path, context)
    >>> #form
